(function(w){var ua=navigator.userAgent;if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(ua)&&ua.indexOf("AppleWebKit")>-1&&ua.indexOf("CriOS")==-1)){return;}
var doc=w.document;if(!doc.querySelector){return;}
var meta=doc.querySelector("meta[name=viewport]");if(!meta){return;}
var initialContent=meta&&meta.getAttribute("content");var disabledZoom=initialContent+",maximum-scale=1";var enabledZoom=initialContent+",maximum-scale=10";var enabled=true;var x,y,z,aig;function restoreZoom(){meta.setAttribute("content",enabledZoom);enabled=true;}
function disableZoom(){meta.setAttribute("content",disabledZoom);enabled=false;}
function checkTilt(e){var ori=w.orientation;if(90==Math.abs(w.orientation)){if(enabled)restoreZoom();return;}
aig=e.accelerationIncludingGravity;x=Math.abs(aig.x);y=Math.abs(aig.y);if(y==0||(x/y)>1.2){if(enabled)disableZoom();}else if(!enabled)restoreZoom();}
w.addEventListener("orientationchange",restoreZoom,false);w.addEventListener("devicemotion",checkTilt,false);})(this);window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,16.667);};})();window.requestInterval=function(fn,delay){if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!window.mozRequestAnimationFrame&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame){return window.setInterval(fn,delay);}
var start=new Date().getTime(),handle={};function loop(){var current=new Date().getTime(),delta=current-start;if(delta>=delay){fn.call();start=new Date().getTime();}
handle.value=requestAnimFrame(loop);}
handle.value=requestAnimFrame(loop);return handle;};window.clearRequestInterval=function(handle){window.cancelAnimationFrame?window.cancelAnimationFrame(handle.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(handle.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(handle.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(handle.value):window.msCancelRequestAnimationFrame?msCancelRequestAnimationFrame(handle.value):clearInterval(handle);};window.requestTimeout=function(fn,delay){if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!window.mozRequestAnimationFrame&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame){return window.setTimeout(fn,delay);}
var start=new Date().getTime(),handle={};function loop(){var current=new Date().getTime(),delta=current-start;if(delta>=delay){fn.call();}else{handle.value=requestAnimFrame(loop);}}
handle.value=requestAnimFrame(loop);return handle;};window.clearRequestTimeout=function(handle){window.cancelAnimationFrame?window.cancelAnimationFrame(handle.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(handle.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(handle.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(handle.value):window.msCancelRequestAnimationFrame?msCancelRequestAnimationFrame(handle.value):clearTimeout(handle);};;(function($){var name="Carousel";var defaults={delay:7500,duration:750,on_class:'on',next_element:$('<a href="#" class="next"><i class="icon-right-arrow"></i></a>'),prev_element:$('<a href="#" class="prev"><i class="icon-left-arrow"></i></a>'),dot_container_element:$('<ol/>'),dot_element:$('<li/>')};function Plugin(element,options){this.element=element;this.$element=$(element);this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=name;this.is_ready=false;this.init();return this;}
Plugin.prototype={init:function(){this.$carousel=$(this.element);this.$slides=this.$carousel.find('li');this.index=this.getIndex();this.total=this.$slides.length;if(this.total<2){return;}
this.height=this.$slides.height();this.css_transitions=$('html.csstransitions').length!==0;this.build();this.play();this.$next.click({forward:true,self:this},this.click);this.$prev.click({forward:false,self:this},this.click);this.$carousel.mouseenter({hover:true,self:this},this.hover);this.$carousel.mouseleave({hover:false,self:this},this.hover);this.$dots.click({self:this},this.choose);},getIndex:function(){var $on=this.$slides.filter('.'+this.options.on_class);if($on.length>0){return $on.index();}
this.$slides.first().addClass(this.options.on_class);return 0;},build:function(){this.offset(this.$slides.filter('.'+this.options.on_class));var $dot=this.options.dot_element;var $dots=[$dot.clone().addClass(this.options.on_class)];this.$dot_container=this.options.dot_container_element;for(var i=1;i<this.total;i++){$dots.push($dot.clone());}
this.$dot_container.append($dots);this.$dots=this.$dot_container.children();this.$next=this.options.next_element;this.$prev=this.options.prev_element;this.$carousel.append(this.$next,this.$prev,this.$dot_container);this.is_ready=true;},choose:function(event){event.preventDefault();var $el=$(this);var self=event.data.self;if($el.hasClass(self.options.on_class)){return;}
self.shift($el.index());},click:function(event){event.preventDefault();event.data.self[event.data.forward?'next':'prev']();},hover:function(event){event.data.self[event.data.hover?'pause':'play']();},offset:function($slide){if(!$slide.hasClass('full-slide')||$slide.data('offset')!=null){return;}
var $img=$slide.find('img');var val=($img.height()-this.height)/-2;$img.css('margin-top',''+val+'px');$slide.data('offset',true);},play:function(){var self=this;this.interval=requestInterval(function(){if(window.location.hash!=="#bbox"){self.next();}},this.options.delay);},pause:function(){clearRequestInterval(this.interval);this.interval=null;},animate:function($elem,attributes,callback){var on_class=this.options.on_class,duration=$(window).width()<720?0:this.options.duration;if(!this.css_transitions){return $elem.addClass(on_class).animate(attributes,duration,callback);}
requestTimeout(function(){$elem.css(attributes).addClass(on_class);requestTimeout(callback,duration);},10);},cleanup:function($_old,$_swap){var $old=$_old;var $swap=$_swap;var self=this;return function(){$old.hide().removeClass(self.options.on_class);$swap.removeAttr('style').css('z-index',1);self.is_ready=true;};},shift:function(index){if(!this.is_ready){return;}
this.is_ready=false;this.index=index;if(this.index<0){this.index=this.total-1;}
var target=this.index%this.total;var $swap=this.$slides.eq(target);var $old=this.$slides.filter(':visible').not($swap);$swap.css({'opacity':0,'z-index':2}).show();this.offset($swap);this.animate($swap,{'opacity':1},this.cleanup($old,$swap));this.$dots.removeClass(this.options.on_class);this.$dots.eq(target).addClass(this.options.on_class);},next:function(){this.shift(this.index+1);},prev:function(){this.shift(this.index-1);}};$.fn[name]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+name)){$.data(this,"plugin_"+name,new Plugin(this,options));}});};}(jQuery));;(function($){var name="Slideshow";var defaults={prev_element:$('<a href="#" class="prev"></a>'),next_element:$('<a href="#" class="next"></a>'),count_element:$('<span class="count"></span>')};function Plugin(element,options){this.element=element;this.$element=$(element);this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=name;this.index=0;this.init();return this;}
Plugin.prototype={init:function(){$slideshow=$(this.element);this.$slideshow=$slideshow;this.$holder=$slideshow.find('ul');this.$slides=this.$holder.find('li');this.$container=$slideshow.find('div');this.$caption=this.$container.find('figcaption');this.total=this.$slides.length;if(this.total<2){return;}
this.css_animations=$('html.cssanimations').length!==0;this.build();this.$next.click({forward:true,self:this},this.click);this.$prev.click({forward:false,self:this},this.click);},build:function(){this.$next=this.options.next_element;this.$prev=this.options.prev_element;this.$count=this.options.count_element;this.$container.append(this.$count,this.$prev,this.$next);this.setCaption(this.$slides.first());this.setCount(this.index+1);},setCaption:function($slide){return this.$caption.text($slide.find('img').data('caption'));},setCount:function(index){return this.$count.text([index,'of',this.total].join(' '));},click:function(event){event.preventDefault();event.data.self[event.data.forward?'next':'prev']();},shift:function(){var target=this.index%this.total;var offset=-100*target+'%';var $slide=this.$slides.eq(target);var obj=this;this.$caption.css('opacity',0);requestTimeout(function(){obj.setCaption($slide).css('opacity',1);},150);obj.setCount(target+1);if(this.css_animations){this.$holder.css('left',offset);}else{this.$holder.animate({'left':offset},250);}},next:function(){this.index++;this.shift();},prev:function(){this.index--;if(this.index<0){this.index=this.total-1;}
this.shift();}};$.fn[name]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+name)){$.data(this,"plugin_"+name,new Plugin(this,options));}});};}(jQuery));;(function($){var name="Accordian",defaults={expandable:'li',target:'a.target',collapsed:'div',on_class:'on'};function Plugin(element,options){this.element=element;this.$element=$(element);this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=name;this.init();return this;}
Plugin.prototype={init:function(){this.$accordian=$(this.element);this.$expandables=this.$accordian.find(this.options.expandable);this.$targets=this.$expandables.find(this.options.target);this.build();this.$targets.click(this.toggle());},build:function(){var $el,parent=this.options.expandable;this.$expandables.find(this.options.collapsed).each(function(){$el=$(this);$el.hide().parent(parent).data('child',$el);});},toggle:function(){var par=this.options.expandable,on=this.options.on_class,duration=200;return function(event){event.preventDefault();var $el=$(this).parent(par),$child=$el.data('child');$el.toggleClass(on);if($el.hasClass(on)){$child.stop().slideDown(duration,function(){$(window).trigger(WRAPPER.recalculate);});}else{$child.stop().slideUp(duration,function(){$(window).trigger(WRAPPER.recalculate);});}};}};$.fn[name]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+name)){$.data(this,"plugin_"+name,new Plugin(this,options));}});};}(jQuery));(function($){$.customSelect=function(el,options){var base=this;var $el=$(el),$inner,$wrap=$('<span/>'),selected=':selected';base.el=el;base.$el=$el;base.$el.data('customSelect',base);function init(){base.options=$.extend({},$.customSelect.defaults,options);var cls=$el.attr('class')===undefined?'custom-select':$el.attr('class'),cur=$el.find(selected),firstCls=cls.split(' ')[0],f='focus',id=$el.attr('id'),innerCls=firstCls+'-inner';if(!id||id.length<1){id=$el.attr('id','_custom_select_'+$.customSelect.uid++).attr('id');}
$el.addClass(cls);$wrap.addClass(firstCls+'-wrap '+cls.split(firstCls).join('')).html('<span class="'+cls+'" id="cs_'+id+'" aria-controls="'+id+'"><span class="'+innerCls+'"></span><i></i></span>');$inner=$wrap.find('.'+innerCls);$el.after($wrap).css({fontSize:$el.next().css('font-size'),opacity:0}).change(function(){base.setText();}).focusin(function(){$wrap.addClass(f);}).focusout(function(){$wrap.removeClass(f);});$wrap.mousemove(function(e){$el.css({top:e.pageY-$wrap.offset().top-5});}).mousedown(function(e){$el.css({top:0});}).append($el);base.setText();}
base.setText=function(){var txt=$el.find(selected).text();$inner.text($.trim(txt));var w=$inner.parent().outerWidth();};init();};$.customSelect.defaults={};$.customSelect.uid=0;$.fn.customSelect=function(options){return this.each(function(){(new $.customSelect(this,options));});};})(jQuery);(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp);}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp));}else if(typeof timestamp==="number"){return inWords(new Date(timestamp));}else{return inWords($.timeago.datetime(timestamp));}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow;}}
var seconds=Math.abs(distanceMillis)/1000;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;var years=days/365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=($l.numbers&&$l.numbers[number])||number;return string.replace(/%d/i,value);}
var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days/30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years));var separator=$l.wordSeparator===undefined?" ":$l.wordSeparator;return $.trim([prefix,words,suffix].join(separator));},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(s);},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601);},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time";}});$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;if($s.refreshMillis>0){setInterval(function(){self.each(refresh);},$s.refreshMillis);}
return self;};function refresh(){var data=prepareData(this);if(!isNaN(data.datetime)){$(this).text(inWords(data.datetime));}
return this;}
function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){element.attr("title",text);}}
return element.data("timeago");}
function inWords(date){return $t.inWords(distance(date));}
function distance(date){return(new Date().getTime()-date.getTime());}
document.createElement("abbr");document.createElement("time");}(jQuery));var WRAPPER=(function($,undefined){var app={recalculate:'NYBC:recalculate'},$document,$window,classes={on:'on',fixed:'fixed',stop:'stop'},list=[$('.menu'),$('.content nav')],$elems=[],footer_top=0;function affix(){setOffsets();$window.scroll(onScroll).on(app.recalculate,setOffsets);}
function onScroll(){var scroll=$window.scrollTop();for(var i=0,j=$elems.length;i<j;i++){var $el=$elems[i];if(scroll>=$el.offset){$el.el.addClass(classes.fixed);if(scroll>=(footer_top-$el.el.outerHeight())){$el.el.addClass(classes.stop);}else{$el.el.removeClass(classes.stop);}}else{$el.el.removeClass(classes.fixed);}}}
function setOffsets(){var $el,offset=0;footer_top=$('footer').offset().top-20,$elems=[];for(var i=0,j=list.length;i<j;i++){$el=list[i];if($el.length>0){offset=$el.offset().top+($el.data('offset')||0);$elems.push({el:$el,offset:offset});}}}
function search(){var $search=$('#nav-search'),$link=$search.find('a'),$input=$search.find('input'),close=function(){$search.removeClass(classes.on);};$link.click(function(event){event.preventDefault();if($search.hasClass(classes.on)){return close();}
$search.addClass(classes.on);$input.focus();});$document.keyup(function(e){if(e.keyCode===27){close();}});}
function init(){$document=$(document);$window=$(window);affix();search();mobile();if(!Modernizr.input.placeholder){placeholder();}
if($('.fb-like').length>0){(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=357719327641505";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));}}
function mobile(){$('#mobile-menu').on('click',openMobile);}
function closeMobile(e){e.stopPropagation();var $el=$('#mobile-menu'),$nav=$('.main-nav');$nav.removeAttr('style');$el.removeClass('on');$el.on('click',openMobile).off('click',closeMobile);$('html').off('click',closeMobile);$nav.off('click',stop);$window.off('resize',closeMobile);}
function openMobile(e){e.stopPropagation();var $el=$('#mobile-menu'),$nav=$('.main-nav');$nav.show();$el.addClass('on');$el.off('click',openMobile).on('click',closeMobile);$('html').on('click',closeMobile);$nav.on('click',stop);$window.on('resize',closeMobile);}
function stop(e){e.stopPropagation();}
function placeholder(){var attr='placeholder';$('input['+attr+'!=""]').each(function(idx,el){$el=$(el);var d=$el.attr(attr);if(d===undefined||$el.attr('type')==='password'){return;}
$el.focus(function onFocus(){$(this).removeClass(attr);if(this.value===d){this.value='';}}).blur(function onBlur(){if($.trim(this.value)===''){$(this).addClass(attr);this.value=d;}}).blur();});}
$(init);return app;}(jQuery));;(function($,undefined){var $document,$window,classes={on:'on',fixed:'fixed',stop:'stop'};function callPlugin(selector,func){var $elem=$(selector);if($elem.length>0){$elem[func]();}}
function init(){var plugins=[['.carousel','Carousel'],['.slideshow','Slideshow'],['.accordian','Accordian'],['.timeago','timeago']];$document=$(document);$window=$(window);mobile();video();$('a[href=#]').attr('href','javascript:;');$("a[href^=http]").click(open);for(var i=0,j=plugins.length;i<j;i++){callPlugin(plugins[i][0],plugins[i][1]);}}
function hideSubmenu(e){e.preventDefault();var $targ=$(this).parent();$targ.hide();requestTimeout(function(){$targ.removeAttr('style');},500);}
function video(){if($('.video').length>0){$('.main-nav > li').mouseenter(hideVideo).mouseleave(showVideo);}}
function hideVideo(){$('.video').css({visibility:'hidden'});}
function showVideo(){$('.video').css({visibility:'visible'});}
function mobile(){$('.main-nav .close').click(hideSubmenu);$('#nav-select').customSelect().change(onNavSelect);}
function onNavSelect(e){window.location=$(this).val();}
function open(e){e.preventDefault();var href=this.getAttribute("href");if(window.location.host!==href.split('/')[2]){window.open(href);}else{window.location=href;}}
$(init);}(jQuery));